
<!DOCTYPE html>
<html lang="en_us">
    <head>
                <title>It's September!!</title>
            <meta charset="utf-8" />
            <meta name="generator" content="Pelican" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <link rel="stylesheet" href="/static/css/main.css" />
            <link rel="stylesheet" href="/static/css/theme.css" />
                    <link rel="icon" href="/images/yazani/yazani_1_extracted_bg_big_eyes_cropped.png" type="image/png" />
                    <link rel="apple-touch-icon" href="/images/yazani/yazani_1_extracted_bg_big_eyes_cropped.png" type="image/png" />
                        <script src="/static/misc.js"></script>



    


        <meta name="tags" content="gamedev, language-design, programming" />
    <meta property="og:site_name" content="dragoncoder047&rsquo;s blog" />
    <meta property="og:title" content="It&#39;s September!!" />
    <meta property="og:description" content="Unfortunately that time of year has crept up… school has started again. And not just any kind of school: I find myself in 12th grade, balancing seven classes, two with AP tests at the end, three with huge final projects. I’m also trying to apply to college at …" />
    <meta property="og:image" content="/images/yazani/yazani_1_extracted_bg.png" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://dragoncoder047.github.io/blog/2023/its-september" />
    <meta property="og:locale" content="['']" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="dragoncoder047&rsquo;s blog - It&#39;s September!!" />
    <meta name="twitter:description" content="Unfortunately that time of year has crept up… school has started again. And not just any kind of school: I find myself in 12th grade, balancing seven classes, two with AP tests at the end, three with huge final projects. I’m also trying to apply to college at …" />
    <meta name="twitter:image" content="/images/yazani/yazani_1_extracted_bg.png" />
            <!-- PrismJS -->
<script src="/static/prism.js" data-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs@v1.x/components/"></script>
<script src="/static/prism-runbutton.js"></script>
<script src="/phoo/prism-phoo.js"></script>        <!-- /PrismJS -->

        <!-- Katex -->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.css" type="text/css" />
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/mhchem.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.js"></script>
<link href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.css" rel="stylesheet" type="text/css" />
<script src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/copy-tex.js"></script>
<script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.body,
            {
                delimiters: [
                    { left: "$$", right: "$$", display: true },
                    { left: "$", right: "$", display: false },
                    { left: "\\begin{align}", right: "\\end{align}", display: true },
                ]
            }
        );
    });
</script>        <!-- /Katex -->






    </head>

    <body class="match-braces rainbow-braces">
        <header>
                <a href="https://dragoncoder047.github.io/blog" class="flex-row"><div class="flex-row"><img src="/images/yazani/yazani_1_extracted_bg.png" style="max-height:10em" id="banner-image" /><div id="sitename-text"><h1>dragoncoder047&rsquo;s blog</h1><h2>random thoughts about nonrandom things</h2></div></div></a>
            <nav>
                <ul>
                    <li><a href="https://dragoncoder047.github.io/blog/">Home</a></li>
                        <li><a href="https://dragoncoder047.github.io/blog/archives">Archives</a>
                        </li>
                        <li><a href="https://dragoncoder047.github.io/blog/tags">By tag</a>
                        </li>
                        <li><a href="/">Site root</a>
                        </li>
                        <li><a href="#">Projects</a>
                                <ul>
                                                            <li><a href="https://dragoncoder047.github.io/armdroid">Armdroid</a>
                        </li>
                        <li><a href="https://dragoncoder047.github.io/langton-music">Langton&rsquo;s Ant Music</a>
                        </li>
                        <li><a href="https://dragoncoder047.github.io/lynx">Lynx</a>
                        </li>
                        <li><a href="https://dragoncoder047.github.io/schemascii">Schemascii</a>
                        </li>
                        <li><a href="https://dragoncoder047.github.io/parasite">Parasite</a>
                        </li>
                        <li><a href="https://dragoncoder047.github.io/thuepaste">Thuepaste</a>
                        </li>

                                </ul>
                        </li>
                    <li>
                        <form action="https://www.google.com/search" method="GET">
                            <input name="q" type="search" placeholder="Search"></input>
                            <input type="hidden" name="as_sitesearch" value="https://dragoncoder047.github.io/blog"></input>
                            <input type="submit" value="Search"></input>
                        </form>
                    </li>
                </ul>
            </nav>
        </header>
        <main>
    <h1><a href="https://dragoncoder047.github.io/blog/2023/its-september" rel="bookmark" title="Permalink to this page">It's September!!</a></h1>
    
    <div class="flex-row">
            <span style="flex: 1">&larr; Previous:
                <a href="https://dragoncoder047.github.io/blog/2023/in-search-of-a-brain">
                    In Search of a Brain
                </a>
            </span>
            <span>Next:
                <a href="https://dragoncoder047.github.io/blog/2023/continuations-and-the-thunk-queue">
                    Continuations and the thunk queue
                </a> &rarr;
            </span>
    </div>
    <div class="post-info">
        Posted <time class="published" datetime="2023-09-18T00:00:00-04:00">Mon 18 September 2023</time>
            <address>By
                    <a href="https://dragoncoder047.github.io/blog/">dragoncoder047</a>
            </address>
            <div class="tags">
                Tags:
                    <a href="https://dragoncoder047.github.io/blog/tag/gamedev">gamedev</a>
                    <a href="https://dragoncoder047.github.io/blog/tag/language-design">language-design</a>
                    <a href="https://dragoncoder047.github.io/blog/tag/programming">programming</a>
            </div>
    </div>
        <p><em>This post is part 7 of the pickle series:</em></p>
        <ol class="series">
                <li>
                    <a href="https://dragoncoder047.github.io/blog/2023/pickles">Pickles!</a>
                </li>
                <li>
                    <a href="https://dragoncoder047.github.io/blog/2023/manual-memory-management-madness">Manual Memory Management Madness</a>
                </li>
                <li>
                    <a href="https://dragoncoder047.github.io/blog/2023/pickle-tokenizer">Pickle Tokenizer</a>
                </li>
                <li>
                    <a href="https://dragoncoder047.github.io/blog/2023/yet-another-garbage-collector">Yet Another Garbage Collector</a>
                </li>
                <li>
                    <a href="https://dragoncoder047.github.io/blog/2023/making-splitting-explicit">Making Splitting Explicit</a>
                </li>
                <li>
                    <a href="https://dragoncoder047.github.io/blog/2023/pickle-has-regular-expressions-apparently">PICKLE Has Regular Expressions, Apparently</a>
                </li>
                <li class="active">
                    <a href="https://dragoncoder047.github.io/blog/2023/its-september">It's September!!</a>
                </li>
                <li>
                    <a href="https://dragoncoder047.github.io/blog/2023/continuations-and-the-thunk-queue">Continuations and the thunk queue</a>
                </li>
                <li>
                    <a href="https://dragoncoder047.github.io/blog/2024/the-lesser-of-two-evils">The Lesser of Two Evils</a>
                </li>
                <li>
                    <a href="https://dragoncoder047.github.io/blog/2024/a-hash-mapped-mess">A Hash-Mapped Mess</a>
                </li>
        </ol>
    <p>Unfortunately that time of year has crept up&hellip; school has started again. And not just any kind of school: I find myself in 12<sup>th</sup> grade, balancing seven classes, two with AP tests at the end, three with huge final projects. I&rsquo;m also trying to apply to college at the same time. Not to mention that I also have a bunch of my own personal projects that I&rsquo;m trying to work on too.</p>
<p>Thankfully I have had a small amount of time to spend on planning a couple of different things.</p>
<h2 id="parasite">Parasite</h2>
<p>I completed and published Parasite last week. It&rsquo;s not terribly polished and the game is practically unplayable, but I am still pretty impressed with where it is so far. It&rsquo;s a bit of an interesting experiment to see what you can do with a bunch of completely untrained neural networks. I encourage you to <a href="/parasite/">try it out</a> and tell me what you think.</p>
<h3 id="things-left-to-do">Things left to do</h3>
<ul>
<li>Implement the last two actions which allow the snakes to mate with each other and create more snakes. Right now they just do nothing with this one. I&rsquo;m also not sure how to merge the AI models of each of the parent snakes when creating the new ones.</li>
<li>Create real levels, with playable goals. This is hard because each level&rsquo;s goal has to be assessed in a different way and so a Javascript function has to be used to test what it needs to and decide if the level is beaten. The other hard part is coming up with the goals!</li>
<li>Create a pre-trained model for the snake AIs, so they actually act like snakes and not noodles. I&rsquo;m also not sure what would be the best approach to doing this. My best idea is to run a specially modified world that automatically rewards and punishes the snakes as they move around, let that run for a long time, and then export the snake models as JSON and load them in later. Unfortunately the system is so complex I&rsquo;m not sure if I will have to run the training world for two hours, or two weeks.</li>
<li>One of the snakes&rsquo; actions is to make &ldquo;sound&rdquo; that all of the other snakes &ldquo;hear&rdquo;, but currently there&rsquo;s no code that will output the sounds for what the player snake &ldquo;hears&rdquo; out the player&rsquo;s speakers. I would do this except I don&rsquo;t have a good pair of headphones and I&rsquo;m trying to develop this where (if I were to be making horrible noises using my computer) I would be disturbing other students, so I decided against that.</li>
</ul>
<h3 id="future-additions">Future additions</h3>
<p>The last thing I want to do but can&rsquo;t at this moment. The game is currently playable using a keyboard and mouse, but I wanted to also be able to add <a href="https://developer.mozilla.org/en-US/docs/Web/API/Gamepad_API">gamepad support</a>. I don&rsquo;t own any gamepads, so that&rsquo;s going to have to wait.</p>
<p>Another idea I considered would be to add a &ldquo;sandbox&rdquo; level at the end, in which the player would have more freedom to do anything they wanted, with no &ldquo;goal&rdquo; to determine when the level is complete. I haven&rsquo;t implemented any of this yet but I might. Nothing is certain at this point.</p>
<h2 id="pickle">PICKLE</h2>
<p>Not much has happened with PICKLE since my last post about it. However, in my investigation of other things I came up wth a few more substantial ideas, which are outlined below.</p>
<h3 id="no-colon-colon-blocks">No-colon colon blocks</h3>
<p>Currently the indentation feature is triggered by the sequence of colon plus newline plus an indented block, like this:</p>
<pre class="highlight"><code class="language-pickle">## This parses as a colon block string, and a single line.
foo bar:
    baz bam

## This causes (or will cause) an "unexpected unindent" error.
foo bar
    baz bam</code></pre>
<p>The mandatory colon has been haunting me for a while and I finally figured out how to remove it.</p>
<p>Normally, the parser &ldquo;looks ahead&rdquo; to check if there is a colon block and if there is it removes the colon from the previous token. However, I realized that it would still be able to detect the indent regardless: when it is parsing the colon block it strips the indent from all of the lines. Functions that take blocks of code instead of strings will trigger the colon block to be parsed, and by then the indent will be gone, so the parser only needs to care about if there <em>is</em> an indent, not the <em>size</em> of the indent (just enough to verify that it&rsquo;s all valid).</p>
<p>When it detects a newline, it looks to see if the next line is indented, and if so, it takes back the newline token and starts chucking the (stripped) lines into a buffer. When it detects a line with no indent, it emits the indent-block string onto the same line as the block header and then finally emits a newline.</p>
<p>Conveniently, this also fixes a problem where the parser wouldn&rsquo;t accept a comment between the colon and the newline when opening a colon-block, because now the colon is just another operator.</p>
<h3 id="pre-concatenation">Pre-concatenation</h3>
<p>While working on parsers for some other mini-languages I discovered an interesting problem that arises when the language includes alphabetic operators such as <code class="language-python highlight">and</code> and <code class="language-python highlight">or</code> and <em>also</em> allowes unquoted strings (there are no symbols). The problem arose when an unquoted string contained a keyword: if I wrote <code>sandbox world</code>, it would actually be interpreted as if I had typed <code>s and box w or ld</code>. This caused a lot of head-scratching until I figured out what was going on and quoted the strings.</p>
<p>PICKLE has symbols, instead of unquoted strings, but the problem could still happen with the every-character-is-its-own-symbol rule I presented previously. This would be solved immediately if I automatically concatenated symbols in the same class to each other before any rules were applied. The most basic rules I can think of would be categories of letters and underscores, digits, and punctuation characters (excluding parentheses which are handled specially by the parser).</p>
<p>The next step could be to add patterns for different number formats, etc. but I want to avoid locking-in specific formats. One of the goals of PICKLE is to have no fixed formats and that would go against it. The easiest solution to this would be to combine PICKLE&rsquo;s pattern matching with a feature of Tcl: each token always has a string representation. That way, when tokens match concatenation rules they could dig up the original string that the programmer wrote and parse <em>that</em> instead of trying to muck around with the object that the token turned into. Better yet, each token could also remember <em>where</em> it was originally written, to be able to give helpful error messages.</p>
<h3 id="resumable-exceptions">Resumable exceptions</h3>
<p>In playing around with the Scheme programming language, I had a few ideas. Compliant Scheme systems implement everything in continuation-passing style. That is, instead of simply returning a result to the caller, each operation calls the current continuation with the result. If the operation could not be completed, it calls the failure continuation with the details of the error.</p>
<p>Continuations are best illustrated, I think, using Javascript <code class="language-js highlight">Promise</code>s. They are, in effect, a limited form of <code>call-with-current-continuation-and-current-failure-continuation</code>:</p>
<pre class="highlight"><code class="language-js">new Promise((resolve, reject) =&gt; {
    // resolve is the current continuation
    // reject is the failure continuation
});</code></pre>
<p>Scheme also has a construct known as <code class="language-scheme highlight">dynamic-wind</code> that functions a lot like Python&rsquo;s <code class="language-python highlight">with</code> blocks. <code class="language-scheme highlight">dynamic-wind</code> takes three thunks, the first is called whenever code in the second starts running, and the third is called whenever code in the second stops running. Entry and exit in Python is only possible by way of normal control flow or thrown exceptions, but in Scheme it&rsquo;s possible to ender and exit the same block many times, using continuations.</p>
<p>The idea I had came after seeing a little snippet demonstrating the use of SISC Scheme&rsquo;s <code class="language-scheme highlight">with-failure-continuation</code>, which acts almost like a Python <code class="language-python highlight">except</code> block, <em>except</em> for the fact that it is also passed the current continuation at the point where the error occurred. This is extremely powerful.</p>
<p>Consider a simple divide-by-zero error. The current continuation of the division expression still exists, and now the failure handler can decide whether to resume or propagate the exception. Python doesn&rsquo;t let you decide what to do in this situation: the result is always an exception being thrown. However, in Scheme, the failure handler can instead resume the computation with a substitute value: in some situations it would be appropriate to return $\pm\infty$ for a division by zero; in other situations a <code class="language-js highlight">NaN</code> value; and in others to propagate the error.</p>
<p>When errors are resumable, it unlocks a lot of possibilities. One useful example I can think of is quantities (numbers with units): a quantities package could install a failure handler that would intercept errors caused by trying to call a number with arguments (which normally would make no sense) and resume the call with a quantity.</p>
<p>For example <code class="language-scheme highlight">(10 'miles)</code> normally would normally not work (Guile gives the message &ldquo;Wrong type to apply: 10&rdquo;), but if the error included details of what was being called and with what arguments, a handler could transform this call into a quantity representing a distance of 10 miles.</p>
<p>So I&rsquo;ve decided that in PICKLE, continuations will be supplied with every error, so the computation can be resumed with any specific values.</p>
<hr>
<p>That&rsquo;s all for now. I hope to be able to implement some of this soon!</p>
        <hr />
        <p><strong>Related Posts</strong></p>
        <ul>
                <li><a href="https://dragoncoder047.github.io/blog/2025/yes-i-deleted-everything">Yes, I deleted everything.</a></li>
                <li><a href="https://dragoncoder047.github.io/blog/2025/whats-in-a-game">What's in a game?</a></li>
                <li><a href="https://dragoncoder047.github.io/blog/2025/one-hell-of-a-physics-engine">One Hell of a Physics Engine</a></li>
                <li><a href="https://dragoncoder047.github.io/blog/2025/so-far-ahead-yet-so-far-behind">So far ahead, yet so far behind</a></li>
                <li><a href="https://dragoncoder047.github.io/blog/2024/boy-have-i-been">Boy, Have I Been...</a></li>
        </ul>
    <script src="https://giscus.app/client.js"
        data-repo="dragoncoder047/blog"
        data-repo-id="R_kgDOHCL60w"
        data-category="Post Comments"
        data-category-id="DIC_kwDOHCL6084CRxCW"
        data-mapping="og:title"
        data-reactions-enabled="1"
        data-input-position="top"
        data-theme="dark"
        data-lang="en"
        crossorigin="anonymous"
        async
    ></script>
            <section id="extras">
                    <div class="blogroll">
                        <ul>
                                <li><a href="https://www.conwaylife.com/">Conwaylife.com Forums</a></li>
                                <li><a href="https://www.python.org/">Python</a></li>
                                <li><a href="http://www.ulisp.com/">uLisp</a></li>
                        </ul>
                    </div>
                    <div class="social">
                        <ul>
                                <li><a href="https://github.com/dragoncoder047">dragoncoder047 on GitHub</a></li>
                                <li><a href="https://youtube.com/@dragoncoder047">dragoncoder047 on YouTube</a></li>
                                <li><a href="https://instagram.com/dragoncoder047/">dragoncoder047 on Instagram</a></li>
                        </ul>
                    </div>
            </section>
        </main>
        <footer>
            <address>
                    Site built by <a href="https://getpelican.com/">Pelican</a>
            </address>
            <a href="#" onclick="window.scrollTo({top: 0, left: 0});">Back to top</a>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XR0F89CCGK"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
            dataLayer.push(arguments);
        }
        gtag("js", new Date());
        gtag("config", "G-XR0F89CCGK");
    </script>

        </footer>
    </body>
</html>